<!doctype html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ê´€ë¦¬ì í˜ì´ì§€</title>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<style>
  body {
    font-family: "Pretendard", sans-serif;
    text-align: center;
    background: #fafafa;
  }
  table {
    margin: 20px auto;
    border-collapse: collapse;
    width: 60%;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 10px;
  }
  th {
    background: #4facfe;
    color: white;
  }
</style>
</head>
<body>
  <h1>ğŸ§¾ ê´€ë¦¬ì í˜ì´ì§€</h1>
  <div id="loginArea">
    <input type="password" id="adminPass" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" />
    <button id="loginBtn">ë¡œê·¸ì¸</button>
  </div>

  <div id="dataArea" style="display:none;">
    <h2>ğŸ“Š í”Œë ˆì´ì–´ í¬ì¸íŠ¸ í˜„í™©</h2>
    <table>
      <thead>
        <tr><th>ë‹‰ë„¤ì„</th><th>í¬ì¸íŠ¸</th></tr>
      </thead>
      <tbody id="playerList"></tbody>
    </table>
  </div>

  <script>
    // ğŸ”¹ Firebase ì„¤ì •
    const firebaseConfig = {
      databaseURL: "https://<YOUR_PROJECT>.asia-southeast1.firebasedatabase.app/"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const loginArea = document.getElementById("loginArea");
    const dataArea = document.getElementById("dataArea");
    const playerList = document.getElementById("playerList");
    const loginBtn = document.getElementById("loginBtn");

    loginBtn.addEventListener("click", () => {
      const inputPass = document.getElementById("adminPass").value.trim();

      db.ref("admin/password").once("value").then(snapshot => {
        const realPass = snapshot.val();
        if (inputPass === realPass) {
          alert("ê´€ë¦¬ì ë¡œê·¸ì¸ ì„±ê³µ!");
          loginArea.style.display = "none";
          dataArea.style.display = "block";
          loadPlayerData();
        } else {
          alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
      });
    });

    function loadPlayerData() {
      db.ref("plays").on("value", (snapshot) => {
        const data = snapshot.val();
        playerList.innerHTML = "";
        for (let name in data) {
          const tr = document.createElement("tr");
          tr.innerHTML = `<td>${name}</td><td>${data[name].points}</td>`;
          playerList.appendChild(tr);
        }
      });
    }
  </script>
</body>
</html>
