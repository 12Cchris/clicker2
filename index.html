<!doctype html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ν¬μΈνΈ ν΄λ¦­μ»¤</title>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<style>
  body {
    font-family: "Pretendard", sans-serif;
    text-align: center;
    margin-top: 40px;
    background: linear-gradient(135deg, #a1c4fd, #c2e9fb);
    color: #333;
  }
  #clickButton {
    font-size: 28px;
    padding: 20px 40px;
    border: none;
    border-radius: 20px;
    background: #4facfe;
    color: white;
    cursor: pointer;
    transition: transform 0.1s, background 0.3s;
  }
  #clickButton:active {
    transform: scale(0.95);
    background: #00f2fe;
  }
  #points {
    font-size: 36px;
    margin-top: 40px;
  }
  #shop {
    margin-top: 40px;
  }
  button {
    cursor: pointer;
  }
</style>
</head>
<body>
  <h1>π’ ν¬μΈνΈ ν΄λ¦­μ»¤ π’</h1>

  <div>
    <input id="playerName" placeholder="λ‹‰λ„¤μ„ μ…λ ¥" />
    <button id="startBtn">μ‹μ‘</button>
  </div>

  <button id="clickButton" disabled>ν΄λ¦­!</button>
  <div id="points">ν¬μΈνΈ: 0</div>

  <div id="shop">
    <h2>π›’ μƒμ </h2>
    <button id="buyBuff">π’¥ ν΄λ¦­ 2λ°° (10μ΄κ°„ / 50P)</button>
  </div>

  <script>
    // π”Ή Firebase μ„¤μ •
    const firebaseConfig = {
      databaseURL: "https://<YOUR_PROJECT>.asia-southeast1.firebasedatabase.app/"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // π”Ή λ³€μ
    let player = null;
    let points = 0;
    let pointPerClick = 1;
    let buffActive = false;

    const clickButton = document.getElementById("clickButton");
    const pointDisplay = document.getElementById("points");
    const startBtn = document.getElementById("startBtn");
    const playerNameInput = document.getElementById("playerName");
    const buyBuffBtn = document.getElementById("buyBuff");

    // π”Ή μ‹μ‘ λ²„νΌ
    startBtn.addEventListener("click", () => {
      player = playerNameInput.value.trim();
      if (!player) return alert("λ‹‰λ„¤μ„μ„ μ…λ ¥ν•μ„Έμ”!");
      clickButton.disabled = false;
      alert(`${player}λ‹, μ‹μ‘ν•©λ‹λ‹¤!`);

      // κΈ°μ΅΄ λ°μ΄ν„° λ¶λ¬μ¤κΈ°
      db.ref("plays/" + player).once("value").then(snapshot => {
        if (snapshot.exists()) {
          points = snapshot.val().points || 0;
        } else {
          points = 0;
        }
        pointDisplay.textContent = `ν¬μΈνΈ: ${points}`;
      });
    });

    // π”Ή ν΄λ¦­ μ‹ ν¬μΈνΈ μ¦κ°€
    clickButton.addEventListener("click", () => {
      if (!player) return;
      points += pointPerClick;
      updatePoints();
    });

    // π”Ή μƒμ  - λ²„ν”„ κµ¬λ§¤
    buyBuffBtn.addEventListener("click", () => {
      if (points < 50) return alert("ν¬μΈνΈκ°€ λ¶€μ΅±ν•©λ‹λ‹¤!");
      if (buffActive) return alert("μ΄λ―Έ λ²„ν”„κ°€ μ μ© μ¤‘μ…λ‹λ‹¤!");

      points -= 50;
      updatePoints();

      buffActive = true;
      pointPerClick *= 2;
      buyBuffBtn.textContent = "π’¥ λ²„ν”„ μ μ© μ¤‘...";

      setTimeout(() => {
        pointPerClick /= 2;
        buffActive = false;
        buyBuffBtn.textContent = "π’¥ ν΄λ¦­ 2λ°° (10μ΄κ°„ / 50P)";
        alert("λ²„ν”„κ°€ μΆ…λ£λμ—μµλ‹λ‹¤!");
      }, 10000);
    });

    // π”Ή DBμ— μ—…λ°μ΄νΈ
    function updatePoints() {
      pointDisplay.textContent = `ν¬μΈνΈ: ${points}`;
      db.ref("plays/" + player).set({ points });
    }
  </script>
</body>
</html>
